<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>peanutButter - A web application to produce rapid-response gridded population estimates</title>






<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">peanutButter - A web application to produce rapid-response gridded population estimates</h1>


<div id="TOC">
true
</div>

<p>17 May 2020</p>
<div id="overview" class="section level2">
<h2>Overview</h2>
<p>The <em>peanutButter</em> web application allows you to produce gridded population estimates from building footprints using the “peanut butter” method of spreading people evenly across buildings based on a set of simple parameters. The <em>peanutButter</em> application utilizes high resolution maps of building footprints (Maxar Technologies, Ecopia.AI 2020) that are based on recent satellite imagery.</p>
<p>The “peanut butter” approach can be applied in a bottom-up or top-down fashion. Bottom-up uses estimates of average household sizes for each settlement type (e.g. urban and rural) and then applying these to each building in the corresponding settlement type. Top-down takes user-defined population totals for administrative units and spreads those people evenly across all buildings within a given unit such that the total per administrative unit matches those defined by the user.</p>
<p>Code for the <em>peanutButter</em> R package is openly available from WorldPop on GitHub: <a href="https://github.com/wpgp/peanutButter" target="_blank">https://github.com/wpgp/peanutButter</a>.</p>
</div>
<div id="quick-start-bottom-up" class="section level2">
<h2>Quick Start: Bottom-up</h2>
<ol style="list-style-type: decimal">
<li><p>Use the sliders to explore population parameters until you find a combination that produces reasonable estimates of total population, urban population, and rural population for the country as a whole.</p></li>
<li><p>Use the “Gridded Population Estimates” button to generate a gridded population map (a geotiff raster) that is produced by applying your population parameters to building footprints in each approximately 100 m grid cell across the country.</p></li>
<li><p>(optional) Use the “Settings” and/or “Source Files” button(s) to save the input data.</p></li>
</ol>
</div>
<div id="quick-start-top-down" class="section level2">
<h2>Quick Start: Top-down</h2>
<ol style="list-style-type: decimal">
<li><p>Upload a GeoJson file containing polygons and their associated population totals, by clicking on the “Browse” button and selecting your GeoJson file. Ensure that you have the correct country selected.</p></li>
<li><p>Use the “Gridded Population Estimates” button to generate a gridded population map (a geotiff raster) that is produced by disaggregating a polygon’s population total evenly across the buildings inside the polygon.</p></li>
<li><p>(optional) Use the “Source Files” button to save the input data.</p></li>
</ol>
</div>
<div id="bottom-up" class="section level2">
<h2>Bottom-up</h2>
<div id="advantages" class="section level3">
<h3>Advantages</h3>
<ul>
<li>This method is quick and easy to implement in situations where suitable population estimates are not currently available.<br />
</li>
<li>High resolution building footprints provide a valuable source of information about where populations are located and their relative densities.</li>
</ul>
</div>
<div id="disadvantages" class="section level3">
<h3>Disadvantages</h3>
<ul>
<li>This method is not objective or driven by population data (i.e. household surveys). It relies on your subjective estimates of population characteristics.<br />
</li>
<li>There are no estimates of uncertainty provided by this method. You will have no objective basis for determing the accuracy of the estimates produced.</li>
</ul>
</div>
<div id="method" class="section level3">
<h3>Method</h3>
<p>The peanutButter method requires you to provide estimates of three population characteristics for both urban and rural settlement types using expert opinion:</p>
<ol style="list-style-type: decimal">
<li>Mean number of people per housing unit<br />
</li>
<li>Mean number of housing units per building<br />
</li>
<li>Proportion of buildings that are residential</li>
</ol>
<p>The population is estimated using the following formula:</p>
<p><code>Population = Pop_Urban + Pop_Rural</code></p>
<p><code>Pop_Urban = Buildings_Urban x PropResidential_Urban x UnitsPerBuilding_Urban x PeoplePerUnit_Urban</code></p>
<p><code>Pop_Rural = Buildings_Rural x PropResidential_Rural x UnitsPerBuilding_Rural x PeoplePerUnit_Rural</code></p>
</div>
<div id="population-parameters" class="section level3">
<h3>Population parameters</h3>
<p><strong>Mean people per housing unit</strong><br />
This parameter defines the average number of people in a housing unit and it can be defined for urban and rural areas separately. References for determining these values could include:</p>
<ul>
<li><a href="https://microdata.worldbank.org/index.php/home" target="_blank">WorldBank Microdata Library</a><br />
</li>
<li><a href="https://www.statcompiler.com/en/" target="_blank">STATCompiler from the DHS Program</a><br />
</li>
<li><a href="https://dhsprogram.com/data/" target="_blank">DHS survey data from USAID</a><br />
</li>
<li><a href="https://mics.unicef.org/surveys" target="_blank">MICS survey data from UNICEF</a><br />
</li>
<li><a href="https://international.ipums.org/international/" target="_blank">IPUMS Census Microdata</a><br />
</li>
<li><a href="https://population.un.org/Household/index.html#/countries/728" target="_blank">United Nations Department of Economic and Social Affairs</a></li>
</ul>
<p><strong>Mean housing units per building</strong><br />
This parameter defines the average number of housing units per residential building. This number would be expected to be near 1 for rural areas and slightly higher in urban areas.</p>
<p><strong>Proportion residential buildings</strong><br />
This parameter defines what proportion of the building footprints (Dooley and Tatem 2020) represent residential buildings. Some buildings are non-residential like factories, shops, barns, and sheds. In addition, there are some erroneous building footprints that do not represent buildings and others that may represents more than one building.</p>
</div>
<div id="default-values" class="section level3">
<h3>Default Values</h3>
<p>We provide moderately informative default values for population parameters, but we strongly urge users to modify the defaults based on a thorough investigation of available data sources. Our process for selecting default values was:</p>
<ol style="list-style-type: decimal">
<li><p>Look up average household sizes (<a href="https://population.un.org/Household/index.html#/countries/728" target="_blank">UN 2019</a> or <a href="https://www.un.org/en/development/desa/population/publications/pdf/ageing/household_size_and_composition_around_the_world_2017_data_booklet.pdf" target="_blank">UN 2017</a>). We assumed that household sizes were equal in urban and rural areas. If no estimate was availabe, we assumed an average of 5 people per housing unit.</p></li>
<li><p>Assume there was an average of 1.1 housing units per building in urban areas and 1 housing unit per building in rural areas.</p></li>
<li><p>Adjust the proportion of buildings that are residential until the total population matched the <a href="https://data.worldbank.org/indicator/sp.pop.totl" target="_blank">WorldBank estimates</a>, assuming the same proportion of residential buildings for urban and rural areas. For countries where population estimates were available from the <a href="https://wopr.worldpop.org" target="_blank">WorldPop Open Population Repository</a>, we used those total populations instead.</p></li>
</ol>
</div>
</div>
<div id="top-down" class="section level2">
<h2>Top-down</h2>
<div id="advantages-1" class="section level3">
<h3>Advantages</h3>
</div>
<div id="disadvantages-1" class="section level3">
<h3>Disadvantages</h3>
</div>
<div id="method-1" class="section level3">
<h3>Method</h3>
</div>
</div>
<div id="source-data" class="section level2">
<h2>Source Data</h2>
<p>There are two source datasets working behind the scenes in the application that were derived from building footprints (WorldPop, Ecopia.AI, and Maxar Technologies 2020):</p>
<ol style="list-style-type: decimal">
<li>The count of buildings in each ~100 m grid cell across the country,<br />
</li>
<li>A classification of each ~100 m grid cell as urban or rural.</li>
</ol>
<p>Use the “Source Files” button to download these rasters and their documentation.</p>
<p>Note: If you want to provide your own building counts and/or map of urban areas, you can use the <a href="https://github.com/wpgp/peanutButter" target="_blank"><em>peanutButter</em> R package</a>.</p>
</div>
<div id="contributing" class="section level2">
<h2>Contributing</h2>
<p>The <em>peanutButter</em> R package was developed by the WorldPop Research Group within the Department of Geography and Environmental Science at the University of Southampton. Funding was provided by the Bill and Melinda Gates Foundation (INV-002697). Maxar Technologies and Ecopia.AI (2020) provided high resolution building footprints based on recent satellite imagery. The <em>peanutButter</em> R package and web application was developed by Doug Leasure. Claire Dooley developed the source rasters of building counts and urban/rural settlements (WorldPop et al. 2020). Maksym Bondarenko maintains WorldPop’s Shiny server. Professor Andy Tatem provides oversight of the WorldPop Research Group.</p>
<p><strong>Recommended citation:</strong><br />
Leasure DR, Dooley CA, Bondarenko M, Tatem AJ. 2020. peanutButter: An R package to produce rapid-response gridded population estimates from building footprints, version 0.1.0. University of Southampton. <a href="https://github.com/wpgp/peanutButter" target="_blank">doi:10.5258/SOTON/WP00667</a></p>
</div>
<div id="license" class="section level2">
<h2>License</h2>
<p>GNU General Public License v3.0 (GNU GPLv3)</p>
</div>
<div id="references" class="section level2">
<h2>References</h2>
<p>Ecopia.AI and Maxar Technologies. 2020. Digitize Africa.</p>
<p>Dooley, C. A. and Tatem, A.J. 2020. Gridded maps of building patterns throughout sub-Saharan Africa, version 1.0. University of Southampton: Southampton, UK. Source of building Footprints “Ecopia Vector Maps Powered by Maxar Satellite Imagery”</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
